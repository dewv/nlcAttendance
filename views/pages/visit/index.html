<h1 style="display: inline">Visits</h1>
<a
    href="<%= baseUrl %>/visit/download"
    class="btn btn-dark float-right mt-2"
    role="button"
    >Download all visit data</a
>

<div class="sticky-table-container mt-3">
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th class="text-center">#</th>
                <th>Name</th>
                <th class="text-center">Check In</th>
                <th class="text-center">Check Out</th>
                <th class="text-center">Visit Length</th>
                <th>Length Estimated?</th>
            </tr>
        </thead>

        <tbody>
            <% if (records) { let dateFormat = { year: 'numeric', month:
            '2-digit', day: '2-digit', hour: 'numeric', minute: 'numeric',
            second: 'numeric', }; records.forEach(function(visit) { %>
            <tr>
                <td class="text-right">
                    <%= visit.id %>
                </td>
                <td>
                    <%= visit.student.firstName + " " + visit.student.lastName
                    %>
                </td>
                <td class="text-right">
                    <%= new Intl.DateTimeFormat("en-US",
                    dateFormat).format(visit.checkInTime) %>
                </td>
                <td class="text-right">
                    <%= visit.checkOutTime ? new Intl.DateTimeFormat("en-US",
                    dateFormat).format(visit.checkOutTime) : "" %>
                </td>
                <td class="text-right">
                    <%= visit.length %>
                </td>
                <td>
                    <% if (visit.isLengthEstimated === null) { %> <%= "" %> <% }
                    else { %> <%= visit.isLengthEstimated ? "Yes" : "No" %> <% }
                    %>
                </td>
            </tr>
            <% }); }%>
        </tbody>
    </table>
</div>
