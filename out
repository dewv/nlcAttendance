
> nlc-attendance@0.0.0 mocha /mnt/c/Users/mattinglys/Documents/nlcAttendance
> nyc ./node_modules/.bin/_mocha --recursive ./test/lifecycle.js ./test

{"path":"views/pages/student/updateForm.html"}


  Staff model
    Standard tests of model, helpers integration
      `getDefaults` helper
        ✓ should return a record with expected sailsjs model attributes
      `getAssociationDomains` helper
        ✓ should return a dictionary containing domain values for each appropriate model attribute
      `encodeAssociations` helper
        ✓ should replace the specified record's domain values with keys for each associated sailsjs model
      `populateOne` helper
        ✓ should return a data record for the specified ID, with all associations populated
      `getCurrentTime` helper
        ✓ should return the current synchronized time
      `convertToHours` helper
        ✓ should return the number of hours, to the nearest quarter hour
      `getRecordList` helper
        ✓ should return a array of records for a defined model
        ✓ should return a array of records for a defined model with a association (43ms)
    A data record returned by `create()`
      ✓ should have correct default field values

  Student model
    Standard tests of model, helpers integration
      `getDefaults` helper
        ✓ should return a record with expected sailsjs model attributes
      `getAssociationDomains` helper
        ✓ should return a dictionary containing domain values for each appropriate model attribute
      `encodeAssociations` helper
        ✓ should replace the specified record's domain values with keys for each associated sailsjs model
      `populateOne` helper
        ✓ should return a data record for the specified ID, with all associations populated (41ms)
      `getCurrentTime` helper
        ✓ should return the current synchronized time
      `convertToHours` helper
        ✓ should return the number of hours, to the nearest quarter hour
      `getRecordList` helper
        ✓ should return a array of records for a defined model
        ✓ should return a array of records for a defined model with a association
    A data record returned by `create()`
      ✓ should have correct default field values

  Visit model
    Standard tests of model, helpers integration
      `getDefaults` helper
        ✓ should return a record with expected sailsjs model attributes
      `getAssociationDomains` helper
        ✓ should return a dictionary containing domain values for each appropriate model attribute
      `encodeAssociations` helper
        ✓ should replace the specified record's domain values with keys for each associated sailsjs model
      `populateOne` helper
        ✓ should return a data record for the specified ID, with all associations populated
      `getCurrentTime` helper
        ✓ should return the current synchronized time
      `convertToHours` helper
        ✓ should return the number of hours, to the nearest quarter hour
      `getRecordList` helper
        ✓ should return a array of records for a defined model
        ✓ should return a array of records for a defined model with a association
    Test for Visit Model
      `Test the association of the student model for name attribute.
        ✓ Returns correct id number (67ms)
      `Test the afterPopulateOne function,
        ✓ checkOutTime gets set to current time when checkOutTime was null
        ✓ `length` should be calculated correctly
        ✓ `isLengthEstimated` is set to true when `length` is longer that 8 hours.
      Test the `afterEncodeAssociations` function,
        ✓ `checkOutTime` gets set to current time when check out form is submitted
        ✓ `length` should be calculated correctly when check out form is submitted
        ✓ `isLengthEstimated` is set to true when the system doesn't calculate the `length` when check out form is submitted
        ✓ Nothing should change when check in form is submitted

  `isAuthenticated` policy
    ✓ should complete unauthenticated requests for `/login`
    ✓ should redirect all other unauthenticated requests to `/login`

  `isAuthorized` policy
    when the user is an authenticated student and a profile update is required
      ✓ should force an update to the student's profile by redirecting requests
    when the user is an authenticated student and checked out
      ✓ should refuse requests that are *not* to check in or update their profile
      ✓ should authorize requests to load their own profile in the update form (61ms)
      ✓ should authorize requests to update their own profile
      ✓ should authorize requests to load the visit create form
      ✓ should authorize requests to submit the visit create form
    when the user is an authenticated student and checked in
      ✓ should refuse requests that are *not* to check out or update their profile
      ✓ should authorize requests to load their own profile in the update form (58ms)
      ✓ should authorize requests to update their own profile
      ✓ should authorize requests to load their own most recent visit in the update form
      ✓ should authorize requests to update their own most recent visit
    when the user is authenticated student and has no visits
      ✓ should refuse requests that are *not* to check in or update their profile (41ms)
      ✓ should authorize requests to load their own profile in the update form (58ms)
      ✓ should authorize requests to update their own profile
      ✓ should authorize requests to load the visit create form
      ✓ should authorize requests to submit the visit create form
    when the user is authenticated staff
      ✓ should authorize requests to load their own profile in the update form
      ✓ should authorize requests to update their own profile
      ✓ should forbid requests to load other user profiles in the update form
      ✓ should forbid requests to update other user profiles
      ✓ should authorize requests to view all visit records
      ✓ should authorize requests to load the browser registration form
      ✓ should forbid requests to load the visit create form
      ✓ should forbid requests to submit the visit create form
      ✓ should forbid requests to load the visit update form
      ✓ should forbid requests to update visits
      ✓ should authorize requests to load the visit spreadsheet

  Standard tests of views, helper integration
    `generateHtmlSelect` helper
      ✓ should provide a <select> tag with <option>s

  Visit Views
    The create form
      ✓ should include a text area for the goal/purpose for the visit
      ✓ should include a submit button to send the form

  Visit Views
    The update form
      ✓ should include select options to edit the question of goal/purpose accomplished
      ✓ should include a text input to edit the tutorCourses
      ✓ should include a text area for comments of the visit
      ✓ should include a submit button to send the form


  70 passing (11s)

